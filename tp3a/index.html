<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.8.0"><meta name=description content="CouchDB: A first touch This practical exercise is intended to make you reason about the differences of principles between &ldquo;classic&rdquo; RDBMS and NoSQL servers for building and managing data. DO NOT expect to acquire an extensive practice of the use of the DBMS used here. Rather expect to be able to:
 Point out some of their principles concerning: data model, design process, internal and external data management, architecture; Compare these principles with those of classic RDBMS."><link rel=alternate hreflang=en-us href=https://javieraespinosa.github.io/web-programming-and-services/tp3a/><meta name=theme-color content="#2c66d1"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"><link rel=stylesheet href=/web-programming-and-services/css/academic.css><link rel=manifest href=/web-programming-and-services/index.webmanifest><link rel=icon type=image/png href=/web-programming-and-services/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/web-programming-and-services/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png><link rel=canonical href=https://javieraespinosa.github.io/web-programming-and-services/tp3a/><meta property="twitter:card" content="summary"><meta property="og:site_name" content="Mobile and Web Services Programming"><meta property="og:url" content="https://javieraespinosa.github.io/web-programming-and-services/tp3a/"><meta property="og:title" content="| Mobile and Web Services Programming"><meta property="og:description" content="CouchDB: A first touch This practical exercise is intended to make you reason about the differences of principles between &ldquo;classic&rdquo; RDBMS and NoSQL servers for building and managing data. DO NOT expect to acquire an extensive practice of the use of the DBMS used here. Rather expect to be able to:
 Point out some of their principles concerning: data model, design process, internal and external data management, architecture; Compare these principles with those of classic RDBMS."><meta property="og:image" content="https://javieraespinosa.github.io/web-programming-and-services/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png"><meta property="twitter:image" content="https://javieraespinosa.github.io/web-programming-and-services/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us"><title>| Mobile and Web Services Programming</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/web-programming-and-services/>Mobile and Web Services Programming</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/web-programming-and-services/>Mobile and Web Services Programming</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/web-programming-and-services/#home><span>About</span></a></li><li class=nav-item><a class=nav-link href=/web-programming-and-services/#content><span>Content</span></a></li><li class=nav-item><a class=nav-link href=/web-programming-and-services/#hands-on><span>Hands on</span></a></li><li class=nav-item><a class=nav-link href=/web-programming-and-services/#bibliography><span>Bibliography</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"></ul></div></nav><article class=article><div class="article-container pt-3"><h1></h1><div class=article-metadata></div></div><div class=article-container><div class=article-style><h1 id=couchdb-a-first-touch>CouchDB: A first touch</h1><p>This practical exercise is intended to make you reason about the differences of principles between &ldquo;classic&rdquo; RDBMS and NoSQL servers for building and managing data. DO NOT expect to acquire an extensive practice of the use of the DBMS used here. Rather expect to be able to:</p><ul><li>Point out some of their principles concerning: data model, design process, internal and external data management, architecture;</li><li>Compare these principles with those of classic RDBMS.</li></ul><p>Therefore we propose an exercise organized into two parts where you are supposed to run some tests and answer control questions for making sure that you are achieving the expected objective of the exercise.</p><h2 id=requirements>Requirements</h2><ul><li><a href=http://couchdb.apache.org/ target=_blank rel=noopener>CouchDB</a></li><li><a href=http://curl.haxx.se/download.html target=_blank rel=noopener>cURL</a> (
<a href="http://www.paehl.com/open_source/?download=curl_740_0.zip" target=_blank rel=noopener>cURL 4 Windows</a>)</li></ul><h2 id=building-and-querying-a-nosql-oriented-database>Building and Querying a NoSQL Oriented Database</h2><p>In this exercise you will populate and query a NoSQL database using data coming from the 
<a href=http://developers.deezer.com/api/ target=_blank rel=noopener>Deezer RESTful service</a>. In particular, you will use data related with the rock band Muse. For instance, the following links give access to Muse&rsquo;s albums and information about similar artists (note that Muse has the ID 705 in Deezer):</p><ul><li><a href=http://api.deezer.com/artist/705/albums>http://api.deezer.com/artist/705/albums</a></li><li><a href=http://api.deezer.com/artist/705/related>http://api.deezer.com/artist/705/related</a></li></ul><h2 id=to-do>TO DO</h2><h3 id=creating-and-populating-a-database>Creating and populating a database</h3><ul><li>Using a terminal, **create **the **database **Deezer:</li></ul><pre><code>curl -X PUT http://localhost:5984/deezer
</code></pre><ul><li>Download (<em>and save into files</em>) the data about **Muse&rsquo; album **and <strong>similar artists</strong>:</li></ul><pre><code>curl -X GET http://api.deezer.com/artist/705/albums &gt; MuseAlbums.json
curl -X GET http://api.deezer.com/artist/705/related &gt; MuseRelatedAlbums.json
</code></pre><ul><li><strong>Populate</strong> the Deezer **database **with the retrieved information by issuing the following commands:</li></ul><pre><code>curl -X PUT http://localhost:5984/deezer/muse_albums --upload-file &quot;MuseAlbums.json&quot;
curl -X PUT http://localhost:5984/deezer/muse_related_artists --upload-file &quot;MuseRelatedAlbums.json&quot;
</code></pre><ul><li><strong>Verify</strong> the content of the database:</li></ul><pre><code>curl -v http://localhost:5984/deezer/muse_albums 
curl -v http://localhost:5984/deezer/muse_related_artists
</code></pre><p>Note that the output includes the HTTP request (<em>and reply</em>) headers sent to (<em>by</em>) CouchDB.</p><ul><li><p>Open <strong>Fouton</strong> (<em>CouchDB Web Interface</em>) on your browser:
<a href=http://127.0.0.1:5984/_utils/index.html target=_blank rel=noopener>http://127.0.0.1:5984/_utils/index.html</a></p></li><li><p>Access and observe the database <strong>Deezer</strong> on <strong>Fouton</strong>.</p></li></ul><h3 id=querying-a-database>Querying a database</h3><p>Execute the following queries:</p><ul><li><strong>Query 1</strong>. Retrieve the name and the web page of the groups that are similar to the rock band Muse.</li></ul><pre><code>**Map** function(doc) {
 var artists = doc.data; 
   if(doc._id == &quot;muse_related_artists&quot;) {
      for(var i in artists)
         emit(artists[i].name, artists[i].link);
   }
}
</code></pre><ul><li><strong>Query 2</strong>. Compute the total number of the albums produced by the rock band Muse (requires to check the ***reduce check button ***in Fouton).</li></ul><pre><code>**Map** function(doc) {
 var artists = doc.data; 
   if(doc._id == &quot;muse_related_artists&quot;) {
      for(var i in artists) emit('muse_albums', 1);
   }
}

**Reduce** function(keys, values, rereduce) {
   return sum(values);
}
</code></pre><h3 id=theoretic-questions-to-answer>Theoretic questions (TO ANSWER)</h3><ul><li>Is it possible to represent data under the classic relational model (see the 1 Normal Form)?</li><li>Compare the notion of key in a relational schema with respect to the notion of key in key-value NoSQL approaches.</li><li>Why is it necessary to define views for querying a database in CouchDB? Is this a way of integrating data? Justify.</li></ul><h2 id=references>REFERENCES</h2><ul><li>Book 
<a href=http://guide.couchdb.org/index.html target=_blank rel=noopener>CouchDB, the definitive guide</a></li><li><a href=http://en.wikipedia.org/wiki/NoSQL target=_blank rel=noopener>NoSQL</a></li></ul></div></div></article><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script><script>const code_highlighting=true;</script><script>const isSiteThemeDark=false;</script><script src=/web-programming-and-services/js/academic.min.6f7ce8be710290b8c431bbc97f405d15.js></script><div class=container><footer class=site-footer><p class=powered-by>Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>